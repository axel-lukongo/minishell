si la fonction rl_replace_line marche pas.

Soit tu utilise sur ubuntu mais sinon faut installer MacPort. Une fois que c'est fait
tu supprime ta lib readline et tu fait : sudo port install readlien.

Mtn sur ton fichier .zshrc a la racine de ton ordi tu ajoute : 
export LIBRARY_PATH=/opt/local/lib:$LIBRARY_PATH
export CPATH=/opt/local/include:$CPATH

et maintenant ca marchera